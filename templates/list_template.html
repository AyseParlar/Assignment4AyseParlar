<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>List</title>
</head>
<body>
<h1>List</h1>
<table>
    <thead>
    <tr>
        {% if student_list %}
            <th>First Name</th>
            <th>Last Name</th>
            <th>Email</th>
            <th>Courses</th>
        {% elif course_list %}
            <th>Teacher</th>
            <th>Name</th>
            <th>Code</th>
            <th>Classroom</th>
            <th>Times</th>
            <th>Students</th>
        {% elif teacher_list %}
            <th>First Name</th>
            <th>Last Name</th>
            <th>Office Details</th>
            <th>Phone</th>
            <th>Email</th>
            <th>Courses</th>
        {% endif %}
    </tr>
    </thead>
    <tbody>
    {% if student_list %}
        {% for student in student_list %}
        <tr>
            <td>{{ student.first_name }}</td>
            <td>{{ student.last_name }}</td>
            <td>{{ student.email }}</td>
            <td>{% for course in student.courses.all %}{{ course.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
        </tr>
        {% endfor %}
    {% elif course_list %}
        {% for course in course_list %}
        <tr>
            <td>{{ course.teacher }}</td>
            <td>{{ course.name }}</td>
            <td>{{ course.code }}</td>
            <td>{{ course.classroom }}</td>
            <td>{{ course.times }}</td>
            <td>{% for student in course.students.all %}{{ student }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
        </tr>
        {% endfor %}
    {% elif teacher_list %}
        {% for teacher in teacher_list %}
        <tr>
            <td>{{ teacher.first_name }}</td>
            <td>{{ teacher.last_name }}</td>
            <td>{{ teacher.office_details }}</td>
            <td>{{ teacher.phone }}</td>
            <td>{{ teacher.email }}</td>
            <td>{% for course in teacher.course_set.all %}{{ course.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</td>
        </tr>
        {% endfor %}
    {% endif %}
    </tbody>
</table>
</body>
</html>